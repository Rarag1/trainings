!function(factory){"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(factory):"undefined"!=typeof module&&module.exports?module.exports=factory():window.CookiesConsent=factory()}(function(){const Cookies=function(){function extend(){for(var i=0,result={};i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes)result[key]=attributes[key]}return result}return function init(converter){function api(key,value,attributes){var result;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(attributes=extend({path:"/"},api.defaults,attributes)).expires){var expires=new Date;expires.setMilliseconds(expires.getMilliseconds()+864e5*attributes.expires),attributes.expires=expires}attributes.expires=attributes.expires?attributes.expires.toUTCString():"";try{result=JSON.stringify(value),/^[\{\[]/.test(result)&&(value=result)}catch(e){}value=converter.write?converter.write(value,key):encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),key=(key=(key=encodeURIComponent(String(key))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var stringifiedAttributes="";for(var attributeName in attributes)attributes[attributeName]&&(stringifiedAttributes+="; "+attributeName,!0!==attributes[attributeName]&&(stringifiedAttributes+="="+attributes[attributeName]));return document.cookie=key+"="+value+stringifiedAttributes}key||(result={});for(var cookies=document.cookie?document.cookie.split("; "):[],rdecode=/(%[0-9A-Z]{2})+/g,i=0;i<cookies.length;i++){var parts=cookies[i].split("="),cookie=parts.slice(1).join("=");'"'===cookie.charAt(0)&&(cookie=cookie.slice(1,-1));try{var name=parts[0].replace(rdecode,decodeURIComponent);if(cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent),this.json)try{cookie=JSON.parse(cookie)}catch(e){}if(key===name){result=cookie;break}key||(result[name]=cookie)}catch(e){}}return result}}return api.set=api,api.get=function(key){return api.call(api,key)},api.getJSON=function(){return api.apply({json:!0},[].slice.call(arguments))},api.defaults={},api.remove=function(key,attributes){api(key,"",extend(attributes,{expires:-1}))},api.withConverter=init,api}(function(){})}(),COOKIE_CODE="_cookies_consent",CONSENTS_ENDPOINT="//web-assets.zeptolab.com/api/consent.php",CONSENT_CATEGORIES={about:{header:"About Cookies",description:"A cookie is a small text file that is stored on your computer by a website you visit.\nMost commonly, websites use cookies to identify visitors, remember visitors' preferences, and to keep\nvisitors logged into their accounts while they navigate the website. Websites may also use cookies\nto display ads that visitors may find more interesting or to better understand how visitors use the website.\nCookies are either first-party cookies, which belong to the domain you are visiting, or third-party cookies,\nwhich are set by and belong to a different domain than the one that you're currently visiting.\nA cookie may also be a session cookie, which is erased when you close your browser, or a persistent cookie,\nwhich remains on your browser until it expires or until you erase them.\nTo learn about the different cookies we use on our websites, please review the tabs to the left."},necessary:{header:"Strictly Necessary Cookies",description:"Strictly necessary cookies are set when users have requested a specific function or service\nfrom the websites. These cookies are necessary to provide the service or functionality requested by users.\nYou may set your browser to block these cookies, but the website will not function properly without them.",customize:!1},analytics:{header:"Analytics Cookies",description:"Analytics cookies help us measure, evaluate, and improve the performance of our websites by giving us\ninformation about how users use the websites. For example, analytics cookies help us identify which parts of\nthe websites are the most popular among users and which parts seem to need more improvement.",customize:!0},functional:{header:"Functional Cookies",description:"Functional cookies enable the website to provide enhanced functionality and personalisation.",customize:!0},info:{header:"More Information",description:'Please <a href="https://www.zeptolab.com/cookies" target="_blank">click here</a>\nto learn more about what kind of cookies are used on the ZeptoLab, Cut the Rope, King of Thieves, and CATS websites.'}},COOKIES_NAMES={analytics:["_ga","_gat","_gid","IDE","DSID","__utma","__utmt","__utmb","__utmc","__utmz","__utmv","__utmx","__utmxx","i","yp","yandexuid","yabs-sid","_ym_isad","_ym_uid","_ym_d","_ym_visorc_20276953","_ym_visorc_28058478","_ym_visorc_20277058","_ym_visorc_33680294"],functional:["fr","datr","c_user","PREF","VISITOR_INFO1_LIVE","YSC","tfw_exp","__atuvc","__atuvs"]},activeProviders={},consentData=function(){var cookies=Cookies.get(COOKIE_CODE);try{return JSON.parse(cookies)}catch(e){return{}}}(),givenConsent={},pluginParams={targetSelector:""},templates={popupTemplate:function(){return['<div class="cookies-popup">','<div class="popup-content">','<div class="popup-content__top">',"<h3>Cookies Settings</h3>",'<button class="popup-close" id="popup-close">',"<span>&times;</span>","</button>","</div>",'<div class="popup-content__options">','<ul id="cookies-options" class="options-list"></ul>','<div class="options-dropdown">','<select id="cookies-options-dropdown"></select>',"</div>",'<div id="cookies-control" class="options-content">','<div class="content-head">',"<h4></h4>",'<label class="switch" style="display: none">','<input type="checkbox" id="cookie-toggle">','<span class="slider round"></span>',"</label>","</div>","<p></p>",'<div id="cookies-used" style="display: none">',"<h5>Cookies Used</h5>","<ul></ul>","</div>","</div>","</div>",'<div class="popup-content__bottom">','<button class="cookies-btn-action" id="cookies-save">Save</button>',"</div>","</div>","</div>"].join("")},bannerTemplate:function(){return['<div class="cookies-banner" id="cookies-banner">','<div class="banner-container">','<div class="description">','<p style="margin-bottom: 5px">',"This website uses cookies to ensure you get the best experience on our website.","</p>",'<button id="banner-settings" class="cookies-btn-link">Settings</button>',"</div>",'<div class="buttons">','<button id="banner-accept" class="cookies-btn-action">Accept all</button>','<button id="banner-reject" class="cookies-btn-link">Reject all</button>',"</div>","</div>","</div>"].join("")},spacerTemplate:function(){return'<div id="cookies-banner-spacer" class="banner-spacer"></div>'}},helpers={getById:function(id){return document.getElementById(id)},makeArray:function(nodes){return Array.prototype.slice.call(nodes)},getDomain:function(url){var match=url.match(/([^.]+\.)?([^\.]+\..+)/i);return match&&match.length>2&&"string"==typeof match[2]?match[2]:null},removeCookie:function(name){var hostname=location.hostname;Cookies.remove(name),Cookies.remove(name,{domain:hostname}),Cookies.remove(name,{domain:this.getDomain(hostname)})},removeChildren:function(root){for(;root.firstChild;)root.removeChild(root.firstChild)},replaceNode:function(newElement,oldElement){newElement&&oldElement&&oldElement.parentNode.replaceChild(newElement,oldElement)},request:function(method,uri,data,callbacks){var xhr=new XMLHttpRequest,json=JSON.stringify(data);xhr.open(method,uri,!0),xhr.setRequestHeader("Content-Type","application/json; charset=utf-8"),xhr.onreadystatechange=function(){if(4===xhr.readyState)if(200===xhr.status)callbacks&&callbacks.success&&callbacks.success(JSON.parse(xhr.responseText));else{if(!callbacks||!callbacks.error)throw new Error("Request failed ("+xhr.status+"): "+xhr.statusText);callbacks.error()}},xhr.send(json)}},events={onOptionClick:function(event){toggleCategory(event.currentTarget.dataset.category)},onOptionSelect:function(event){toggleCategory(event.currentTarget.value)},onCookieToggle:function(event){var checkbox=event.currentTarget;updateConsent(checkbox.name,checkbox.checked)},onCookiesSave:function(){updateConsentData(givenConsent)?(updateConsentData({pending:!0}),location.reload()):events.onPopupToggle()},onRejectAll:function(){updateAllConsents(!1),events.onCookiesSave()},onAcceptAll:function(){updateAllConsents(!0),events.onCookiesSave()},onPopupToggle:function(event){event&&event.preventDefault(),helpers.getById("cookies-consent").querySelector(".cookies-popup").classList.toggle("shown")}};function adjustSpacer(){var banner=helpers.getById("cookies-banner"),spacer=helpers.getById("cookies-banner-spacer");banner&&(banner.offsetHeight!==spacer.offsetHeight&&(spacer.style.height=banner.offsetHeight+"px"))}function generateUI(){var targetSelector,targetElement,rootElement,optionsList,optionsDropdown;targetSelector=pluginParams.targetSelector,targetElement=document.body,(rootElement=document.createElement("div")).id="cookies-consent",consentDataExists()||(rootElement.innerHTML+=templates.bannerTemplate(),rootElement.innerHTML+=templates.spacerTemplate()),rootElement.innerHTML+=templates.popupTemplate(),targetSelector&&(targetElement=document.querySelector(targetSelector)||targetElement),targetElement.appendChild(rootElement),optionsList=helpers.getById("cookies-options"),optionsDropdown=helpers.getById("cookies-options-dropdown"),Object.keys(activeProviders).forEach(function(provider,index){var category=CONSENT_CATEGORIES[provider],listItem=document.createElement("li"),option=document.createElement("option");listItem.textContent=category.header,listItem.dataset.category=provider,listItem.addEventListener("click",events.onOptionClick),option.textContent=category.header,option.value=provider,optionsList.appendChild(listItem),optionsDropdown.appendChild(option),0===index&&toggleCategory(provider)}),adjustSpacer()}function toggleCategory(category){var data=CONSENT_CATEGORIES[category],cookies=activeProviders[category],cookieControl=helpers.getById("cookies-control"),cookiesUsed=helpers.getById("cookies-used"),header=cookieControl.querySelector("h4"),description=cookieControl.querySelector("p"),cookiesList=cookiesUsed.querySelector("ul"),cookieSwitch=cookieControl.querySelector(".switch"),checkBox=helpers.getById("cookie-toggle");cookieControl.scrollTop=0,header.textContent=data.header,description.innerHTML=data.description,helpers.removeChildren(cookiesList),cookies?(cookies.forEach(function(cookie){var element=document.createElement("li");element.textContent=cookie,cookiesList.appendChild(element)}),cookiesUsed.style.display=""):cookiesUsed.style.display="none",data.customize?(cookieSwitch.style.display="",checkBox.name=category,checkBox.checked=function(category){return!!givenConsent[category]}(category)):(cookieSwitch.style.display="none",checkBox.name="");var optionsList=helpers.getById("cookies-options");helpers.getById("cookies-options-dropdown").value=category,helpers.makeArray(optionsList.childNodes).forEach(function(option){option.dataset.category===category?option.classList.add("active"):option.classList.remove("active")})}function sendConsent(){!consentDataExists()||"pending"in consentData&&!consentData.pending||helpers.request("post",CONSENTS_ENDPOINT,consentData,{success:function(data){data.token&&updateConsentData({token:data.token,pending:!1})}})}function updateAllConsents(value){Object.keys(givenConsent).forEach(function(category){updateConsent(category,value)})}function updateConsent(name,value){givenConsent[name]=value}function consentDataExists(){return!!Cookies.get(COOKIE_CODE)}function updateConsentData(data){if(data){Object.keys(data).forEach(function(key){consentData[key]=data[key]});var consentString=JSON.stringify(consentData);return Cookies.get(COOKIE_CODE)!==consentString&&(Cookies.set(COOKIE_CODE,consentString,{expires:45}),!0)}}function clearUnapprovedCookies(){Object.keys(CONSENT_CATEGORIES).forEach(function(category){CONSENT_CATEGORIES[category].customize&&(check(category)||function(category){var cookies=COOKIES_NAMES[category];cookies&&cookies.forEach(function(name){helpers.removeCookie(name)})}(category))})}function initInterface(params){if(document.getElementById("cookies-consent"))throw new Error("CookiesConsent has already been initialized");if(!params)throw new Error("Params must be specified");var providers,cookieToggle,cookiesSave,popupClose,banner,bannerSettings,bannerAccept,bannerReject,optionsDropdown,settingsLinks;params.providers||console.warn("You have not specified cookies lists"),providers=params.providers,Object.keys(CONSENT_CATEGORIES).filter(function(category){return!("customize"in CONSENT_CATEGORIES[category]&&providers)||category in providers}).forEach(function(category){activeProviders[category]=providers?providers[category]:null,CONSENT_CATEGORIES[category].customize&&updateConsent(category,check(category))}),function(params){Object.keys(params).forEach(function(param){!param in pluginParams||(pluginParams[param]=params[param])})}(params),generateUI(),cookieToggle=helpers.getById("cookie-toggle"),cookiesSave=helpers.getById("cookies-save"),popupClose=helpers.getById("popup-close"),banner=helpers.getById("cookies-banner"),bannerSettings=helpers.getById("banner-settings"),bannerAccept=helpers.getById("banner-accept"),bannerReject=helpers.getById("banner-reject"),optionsDropdown=helpers.getById("cookies-options-dropdown"),settingsLinks=document.querySelectorAll("[data-consent-settings]"),cookieToggle.addEventListener("change",events.onCookieToggle),cookiesSave.addEventListener("click",events.onCookiesSave),popupClose.addEventListener("click",events.onPopupToggle),optionsDropdown.addEventListener("change",events.onOptionSelect),banner&&(bannerSettings.addEventListener("click",events.onPopupToggle),bannerReject.addEventListener("click",events.onRejectAll),bannerAccept.addEventListener("click",events.onAcceptAll),window.addEventListener("resize",adjustSpacer,!0)),helpers.makeArray(settingsLinks).forEach(function(link){link.addEventListener("click",events.onPopupToggle)}),sendConsent()}function check(category){return!!consentData[category]}return clearUnapprovedCookies(),scripts=document.querySelectorAll("script[data-consent-condition]"),helpers.makeArray(scripts).forEach(function(script){if(check(script.dataset.consentCondition)){var clone=document.createElement("script");clone.async=!0,clone.src=script.src;var scriptContent=script.textContent.trim();scriptContent.length>0&&(clone.textContent=scriptContent),helpers.replaceNode(clone,script)}}),{initInterface,check};var scripts});